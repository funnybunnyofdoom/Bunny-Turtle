--This api handles location
dirName = "/config/loc.dat" -- This is the directory
 
function setLoc(x,z,y,face) --sets x and z of turtle
  local file = fs.open(dirName,'w')
  file.write(x..'\n'..z..'\n'..y..'\n'..face)
  file.close()
end
 
function getLoc()
  local file = fs.open(dirName,'r')
  local x = file.readLine()
  local z = file.readLine()
  local y = file.readLine()
  local face = file.readLine()
  file.close()
  return x,z,y,face
end
 
function up()
  local x,z,y,face = getLoc()
  y = y + 1
  setLoc(x,z,y,face)
end
 
function down()
  local x,z,y,face = getLoc()
  y = y - 1
  setLoc(x,z,y,face)
end
 
function right()
  local x,z,y,face = getLoc()
  if face == 'South' then
    face = 'West'
  elseif face == 'West' then
    face = 'North'
  elseif face == 'North' then
    face = 'East'
  else
    face = 'South'
  end
  setLoc(x,z,y,face)
end
 
function left()
  local x,z,y,face = getLoc()
  if face == 'South' then
    face = 'East'
  elseif face == 'East' then
    face = 'North'
  elseif face == 'North' then
    face = 'West'
  else
    face = 'South'
  end
  setLoc(x,z,y,face)
end
 
function forward()
  local x,z,y,face = getLoc()
  if face == 'North' then
    z = z + 1
  elseif face == 'East' then
    x = x - 1
  elseif face == 'South' then
    z = z - 1
  else
    x = x + 1
  end
  setLoc(x,z,y,face)
end
 
function backward()
  local x,z,y,face = getLoc()
  if face == 'North' then
    z = z - 1
  elseif face == 'East' then
    x = x + 1
  elseif face == 'South' then
    z = z + 1
  else
    x = x - 1
  end
  setLoc(x,z,y,face)
end
 
function display()
  local x,z,y,face = loc.getLoc()
  local X,Y = term.getSize()
  myWindow = window.create(term.current(),2,(Y/2),10,6)
  myWindow.setBackgroundColor(colors.blue)
  myWindow.setTextColor(colors.lightGray)
  myWindow.clear()
  myWindow.setCursorPos(2,2)
  myWindow.write('X:'..x)
  myWindow.setCursorPos(2,3)
  myWindow.write('Z:'..z)
  myWindow.setCursorPos(2,4)
  myWindow.write('Y:'..y)
  myWindow.setCursorPos(2,5)
  myWindow.write('D:'..face)
  term.setCursorPos(1,1)
  term.setTextColor(colors.white)
end
--display()
 
function setPoint(name)
  file = fs.open('/config/points.dat','a')
  file.write(name..'\n')
  x,z,y,face = loc.getLoc()
  file.write(x)
  file.write('\n')
  file.write(z)
  file.write('\n')
  file.write(y)
  file.write('\n')
  file.write(face)
  file.write('\n')
  file.close()
end
 
function getPoint()
  file = fs.open('/config/points.dat','r')
  book = {}
  index = 0
  for i=1,5 do
    book[i] = file.readLine()
  end
  file.close()
  return book
end
